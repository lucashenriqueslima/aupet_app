<ion-content>
    <app-header-simples *ngIf="appService.ambiente != 'associado'" title="Meus leads" (click)="backPage()"></app-header-simples>
    <app-header-simples *ngIf="appService.ambiente == 'associado'" title="Solicitação de Adesão" (click)="backPage()"></app-header-simples>
    <div class="content">
        <div class="info_header">
            <svg class="user" xmlns="http://www.w3.org/2000/svg" width="26.999" height="27" viewBox="0 0 26.999 27"><g id="user_1_" data-name="user (1)" transform="translate(0 0)"><path id="Caminho_594" data-name="Caminho 594" d="M14.112,25.093l-4.028,2.2a3.62,3.62,0,0,0-.646.46,13.491,13.491,0,0,0,17.334.045,3.574,3.574,0,0,0-.71-.476l-4.313-2.156a1.645,1.645,0,0,1-.909-1.471V22a6.515,6.515,0,0,0,.408-.525,9.925,9.925,0,0,0,1.341-2.7,1.355,1.355,0,0,0,.961-1.289V15.677a1.349,1.349,0,0,0-.451-1V12.065S23.633,8,18.13,8s-4.967,4.064-4.967,4.064v2.611a1.347,1.347,0,0,0-.451,1v1.806a1.354,1.354,0,0,0,.625,1.137A8.964,8.964,0,0,0,14.969,22V23.65A1.647,1.647,0,0,1,14.112,25.093Z" transform="translate(-4.629 -3.925)" fill="#fff"/><g id="Grupo_262" data-name="Grupo 262" transform="translate(0 0)"><path id="Caminho_595" data-name="Caminho 595" d="M13.731,0A13.491,13.491,0,0,0,4.813,23.821a3.587,3.587,0,0,1,.64-.455l4.028-2.2a1.646,1.646,0,0,0,.857-1.444V18.074a8.956,8.956,0,0,1-1.633-3.379,1.355,1.355,0,0,1-.625-1.137V11.752a1.349,1.349,0,0,1,.451-1V8.139S8,4.075,13.5,4.075s4.967,4.064,4.967,4.064v2.611a1.347,1.347,0,0,1,.451,1v1.806a1.355,1.355,0,0,1-.961,1.289,9.925,9.925,0,0,1-1.341,2.7,6.515,6.515,0,0,1-.408.525v1.692a1.644,1.644,0,0,0,.909,1.471l4.313,2.156a3.592,3.592,0,0,1,.708.475A13.5,13.5,0,0,0,13.731,0Z" transform="translate(0 0)" fill="#772e8a"/></g></g></svg>
            <p class="data">{{data?.lead?.proposta?.create_at | date:'dd/MM/yyyy HH:mm'}}</p>
            <h2>{{data?.lead?.pessoa?.nome}}</h2>
            <button class="editar" (click)="open_modal_alterar_dados()"><svg xmlns="http://www.w3.org/2000/svg" width="14.867" height="14.866" viewBox="0 0 14.867 14.866"><g id="edit_1_" data-name="edit (1)" transform="translate(0 -0.004)"><g id="Grupo_301" data-name="Grupo 301" transform="translate(0 1.066)"><g id="Grupo_300" data-name="Grupo 300"><path id="Caminho_624" data-name="Caminho 624" d="M12.212,40.508a.531.531,0,0,0-.531.531v5.309a.531.531,0,0,1-.531.531H1.593a.531.531,0,0,1-.531-.531V35.73a.531.531,0,0,1,.531-.531H7.964a.531.531,0,1,0,0-1.062H1.593A1.593,1.593,0,0,0,0,35.73V46.349a1.593,1.593,0,0,0,1.593,1.593H11.15a1.593,1.593,0,0,0,1.593-1.593V41.039A.531.531,0,0,0,12.212,40.508Z" transform="translate(0 -34.137)"/></g></g><g id="Grupo_303" data-name="Grupo 303" transform="translate(3.186 0.004)"><g id="Grupo_302" data-name="Grupo 302" transform="translate(0 0)"><path id="Caminho_625" data-name="Caminho 625" d="M113.494.6a2.032,2.032,0,0,0-2.875,0l-6.994,6.993a.537.537,0,0,0-.128.208l-1.062,3.186a.531.531,0,0,0,.5.7.539.539,0,0,0,.168-.027l3.186-1.062a.531.531,0,0,0,.208-.128l6.994-6.994A2.032,2.032,0,0,0,113.494.6Z" transform="translate(-102.409 -0.004)"/></g></g></g></svg></button>
        </div>
        <div class="dados_content">
            <div class="item">
                <h3>E-mail</h3>
                <p>{{data?.lead?.pessoa?.email}}</p>
            </div>
            <div class="item">
                <h3>Telefone</h3>
                <p>{{data?.lead?.pessoa?.telefone}}</p>
            </div>
        </div>
        <div class="contact_buttons" *ngIf="appService.ambiente != 'associado'">
            <button class="telefone" (click)="call()">ligar</button>
            <button class="whatsapp" (click)="whatsapp()">
                <svg id="whatsapp" xmlns="http://www.w3.org/2000/svg" width="8.431" height="8.431" viewBox="0 0 8.431 8.431"><path id="Caminho_604" data-name="Caminho 604" d="M4.217,0h0A4.213,4.213,0,0,0,.8,6.686L.277,8.253,1.9,7.735A4.215,4.215,0,1,0,4.217,0Z" transform="translate(0)" fill="#4caf50"/><path id="Caminho_605" data-name="Caminho 605" d="M112.167,121.113a1.19,1.19,0,0,1-.827.595c-.22.047-.508.084-1.477-.317a5.281,5.281,0,0,1-2.1-1.854,2.408,2.408,0,0,1-.5-1.272,1.346,1.346,0,0,1,.431-1.026.613.613,0,0,1,.431-.151c.052,0,.1,0,.141,0,.124.005.186.013.268.208.1.245.349.85.379.912a.251.251,0,0,1,.018.228.728.728,0,0,1-.136.193c-.062.072-.121.126-.183.2s-.121.139-.05.262a3.741,3.741,0,0,0,.684.85,3.1,3.1,0,0,0,.989.61.267.267,0,0,0,.3-.047,5.105,5.105,0,0,0,.329-.436.235.235,0,0,1,.3-.092c.114.04.716.337.84.4s.206.092.236.144A1.05,1.05,0,0,1,112.167,121.113Z" transform="translate(-105.498 -115.16)" fill="#fafafa"/></svg>
                iniciar chat
            </button>
        </div>
        
        <div class="pets_lead" >
            <div class="item" *ngFor="let pet of data?.lead?.pets;let i = index">
                <div class="title">
                    <h3>{{ pet?.nome }}</h3>
                    <button class="share" (click)="compartilhar(pet)"><svg xmlns="http://www.w3.org/2000/svg" width="14.185" height="16.555" viewBox="0 0 14.185 16.555"><g transform="translate(-147.465 0.011)"><path d="M15.229,12.634a2.955,2.955,0,0,0-2.11.892L9.7,11.334a2.837,2.837,0,0,0,0-2.128l3.416-2.193a2.955,2.955,0,1,0-.845-2.063,2.89,2.89,0,0,0,.207,1.064L9.065,8.207a2.955,2.955,0,1,0,0,4.137l3.416,2.193a2.89,2.89,0,0,0-.207,1.052,2.955,2.955,0,1,0,2.955-2.955Z" transform="translate(143.466 -2)" fill="#fff"/></g></svg></button>
                    <button class="delete" (click)="open_modal_excluir_plano(pet)"><svg xmlns="http://www.w3.org/2000/svg" width="14.519" height="16.59" viewBox="0 0 14.519 16.59"><g transform="translate(-1.173 -1.921)"><g transform="translate(1.173 1.921)"><path d="M39.32,40.541a.59.59,0,0,0-.59.59v4.84a.59.59,0,0,0,1.18,0V41.131A.59.59,0,0,0,39.32,40.541Z" transform="translate(-33.418 -33.881)" fill="#fff"/><path d="M56.4,40.541a.59.59,0,0,0-.59.59v4.84a.59.59,0,0,0,1.18,0V41.131A.59.59,0,0,0,56.4,40.541Z" transform="translate(-47.543 -33.881)" fill="#fff"/><path d="M21.338,15.858V5.946h.584a.59.59,0,0,0,0-1.18h-3V3.747A1.749,1.749,0,0,0,17.171,2h-3.7a1.749,1.749,0,0,0-1.747,1.747V4.765H8.584a.59.59,0,0,0,0,1.18H9.3v9.912a2.732,2.732,0,0,0,2.732,2.732h6.57A2.732,2.732,0,0,0,21.338,15.858ZM12.9,3.747a.567.567,0,0,1,.566-.566h3.7a.567.567,0,0,1,.566.566V4.765H12.9Zm-2.42,12.111V6.038h9.674v9.82a1.554,1.554,0,0,1-1.552,1.552h-6.57A1.554,1.554,0,0,1,10.484,15.858Z" transform="translate(-7.994 -2)" fill="#fff"/></g></g></svg></button>
                </div>

                <div class="plano">
                    <h4>Plano</h4>
                    <p>{{ pet?.plano?.titulo }}</p>

                    <button class="detalhes" routerLink="pet/{{pet.id}}">Mais detalhes</button>
                </div>

                <div class="status">
                    <h3>Situação da proposta:</h3>
                    
                    <div active="true">
                        <h4>Dados do Plano / Pet</h4>
                        <svg class="on" xmlns="http://www.w3.org/2000/svg" width="20.396" height="15.837" viewBox="0 0 20.396 15.837"> <path id="check" d="M7.81,15.938a1.041,1.041,0,0,1-1.472,0L.458,10.057a1.561,1.561,0,0,1,0-2.209l.736-.736a1.562,1.562,0,0,1,2.209,0l3.671,3.671L16.993.864a1.562,1.562,0,0,1,2.209,0l.736.736a1.561,1.561,0,0,1,0,2.209Zm0,0" transform="translate(0 -0.406)" fill="#00d58d"/> </svg>
                    </div>
                    <div [attr.active]="pet?.assinatura?.id != null">
                        <h4>Pagamento / Assinatura</h4>
                        <button (click)="share(pet)">enviar link pagamento</button>
                        <svg class="on" xmlns="http://www.w3.org/2000/svg" width="20.396" height="15.837" viewBox="0 0 20.396 15.837"> <path id="check" d="M7.81,15.938a1.041,1.041,0,0,1-1.472,0L.458,10.057a1.561,1.561,0,0,1,0-2.209l.736-.736a1.562,1.562,0,0,1,2.209,0l3.671,3.671L16.993.864a1.562,1.562,0,0,1,2.209,0l.736.736a1.561,1.561,0,0,1,0,2.209Zm0,0" transform="translate(0 -0.406)" fill="#00d58d"/> </svg>
                    </div>
                </div>
            </div>

            <button class="adicionar_pet" (click)="open_modal_add_pet()">
                <svg xmlns="http://www.w3.org/2000/svg" width="35" height="43" viewBox="0 0 35 43"><g transform="translate(73 -1408)"><circle cx="17.5" cy="17.5" r="17.5" transform="translate(-73 1412)" fill="#00c656"/><text transform="translate(-65 1442)" fill="#fff" font-size="32" font-family="OpenSans-Regular, Open Sans" letter-spacing="0.03em"><tspan x="0" y="0">+</tspan></text></g></svg>
                Adicionar pet
            </button>
        </div>
    </div>
</ion-content>